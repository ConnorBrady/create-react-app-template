var BSExtract={};(function(){function getVideoURL(){var flashvars=unescape(bvd_InfoExtractor.extractFlashvars());flashvars=unescape(flashvars);flashvarsArr=flashvars.split("&");var videoURL="";for(var i=0;i<flashvarsArr.length;i++){var decodeURL=flashvarsArr[i];var pos=decodeURL.indexOf("file_url");if(pos!=-1){decodeURL=decodeURL.substring(decodeURL.indexOf("file_url"),decodeURL.length);videoURL=decodeURL.replace("file_url=","");break;}}return videoURL;}var btnDownloadDiv;function checkVideo(){var playerDiv=document.getElementsByTagName("object")[0];if(!playerDiv){return false;}var videoURL=bvd_InfoExtractor.getVideoInfo(getVideoURL());BSMyTubeGetModule.AddUrl(videoURL,false,false);return true;}function handleBeforeLoadEvent(event){var element=event.target;if(element.allowedToLoad)return;if(!(element instanceof HTMLObjectElement||element instanceof HTMLEmbedElement))return;if(element.getAttribute("classid"))return;checkVideo();}checkVideo();document.addEventListener("beforeload",handleBeforeLoadEvent,true);})();
